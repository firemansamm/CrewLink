os: unstable
cache:
  - node_modules
secure: "aKnJ+t8laK5/a5F0HAS7KzQO66D065sl51Lu8fafVhdgc3ArsGg65Igp576TLwoPprVGssr4aBeJkSTX8ZCRG91fNwVng1PE9wCG3CXng/dYhf5N7ZtfyzhBKef2tEq+nw+lfyums/p7QODsfwGQM2RfLN3op/E3c3HgOhG0hNo="
secure: "RUnmht6iaNKqB4PtFt0wNXHE7JzuC39xhJGw0lve/7vPbA4L8ZHFHnbpb5Q+lwRwGZqohngiYR1AnXZlOsesJmkU5CctW8SCkkMpNQXZe5X6WmFbtMhP13vwI1a1f+l62Lp1snui+XCnD2ZnRDtTx5TAMkMIp3Dkmj6IW4dqGOg="
environment:
  matrix:
    - nodejs_version: 14
install:
  - ps: Install-Product node $env:nodejs_version
  - set CI=true
  - npm install -g npm@latest
  - set PATH=%APPDATA%\npm;%PATH%
  - npm install -g yarn@latest
  - yarn install
  - if not exist "node_modules\iohook\builds\electron-v80-win32-x64\build\Release\" mkdir -p node_modules\iohook\builds\electron-v80-win32-x64\build\Release\
  - cp iohook\iohook.node node_modules\iohook\builds\electron-v80-win32-x64\build\Release\
  - cp iohook\uiohook.dll node_modules\iohook\builds\electron-v80-win32-x64\build\Release\
matrix:
  fast_finish: true
test: off
version: '{build}'
shallow_clone: true
clone_depth: 1
build_script:
  - npm run dist
artifacts:
  - path: dist/win-unpacked
    name: unpacked
    type: zip